<!doctype html>
<html lang="id" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SRQ Result - Patient</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    :root {
      --soft-sage: #CFE8E5;
      --soft-lavender: #E6E6FA;
      --soft-blue: #D6E6F2;
      --soft-beige: #FDF6EC;
      --text-primary: #2D3748;
      --text-secondary: #718096;
      --text-tertiary: #A0AEC0;
      --card-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
      --status-normal: #A8D5BA;
      --status-warning: #FFD4A3;
      --status-urgent: #E8B4B8;
    }

    * {
      font-family: 'Plus Jakarta Sans', sans-serif;
    }

    html, body {
      height: 100%;
      margin: 0;
    }

    body {
      background: linear-gradient(135deg, var(--soft-beige) 0%, var(--soft-blue) 50%, var(--soft-lavender) 100%);
      min-height: 100%;
      color: var(--text-primary);
    }

    .main-container {
      min-height: 100%;
      padding: 2rem 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .content-wrapper {
      width: 100%;
      max-width: 700px;
    }

    /* Header with Back Button */
    .header-bar {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 2.5rem;
    }

    .btn-back {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 44px;
      height: 44px;
      background: rgba(255, 255, 255, 0.9);
      border: 2px solid rgba(207, 232, 229, 0.3);
      border-radius: 14px;
      cursor: pointer;
      transition: all 0.3s ease;
      flex-shrink: 0;
    }

    .btn-back:hover {
      background: var(--soft-sage);
      transform: translateX(-4px);
      border-color: var(--soft-sage);
    }

    .btn-back svg {
      width: 20px;
      height: 20px;
      color: var(--text-primary);
      stroke-width: 2.5;
    }

    .header-title {
      flex-grow: 1;
    }

    .header-title h1 {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--text-primary);
      margin: 0;
    }

    /* Patient Info Card */
    .patient-card {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 24px;
      padding: 2.5rem;
      box-shadow: var(--card-shadow);
      margin-bottom: 2rem;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.5);
    }

    .patient-header {
      display: flex;
      align-items: center;
      gap: 1.5rem;
      margin-bottom: 2rem;
      padding-bottom: 2rem;
      border-bottom: 2px solid rgba(207, 232, 229, 0.2);
    }

    .patient-avatar {
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, var(--soft-sage), var(--soft-blue));
      border-radius: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 8px 24px rgba(207, 232, 229, 0.3);
      flex-shrink: 0;
    }

    .patient-avatar svg {
      width: 40px;
      height: 40px;
      color: var(--text-primary);
    }

    .patient-info h2 {
      font-size: 1.375rem;
      font-weight: 700;
      color: var(--text-primary);
      margin: 0 0 0.25rem 0;
    }

    .patient-info p {
      font-size: 0.9rem;
      color: var(--text-secondary);
      margin: 0;
    }

    /* Score Display */
    .score-section {
      background: linear-gradient(135deg, rgba(207, 232, 229, 0.1), rgba(214, 230, 242, 0.1));
      border-radius: 20px;
      padding: 2rem;
      margin-bottom: 2rem;
      text-align: center;
      border: 2px solid rgba(207, 232, 229, 0.2);
    }

    .score-label {
      font-size: 0.9rem;
      color: var(--text-secondary);
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 0.75rem;
    }

    .score-number {
      font-size: 4.5rem;
      font-weight: 700;
      background: linear-gradient(135deg, var(--soft-sage), var(--soft-blue));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin: 0;
      line-height: 1;
    }

    .score-max {
      font-size: 1.25rem;
      color: var(--text-secondary);
      margin-top: 0.5rem;
    }

    /* Progress Bar */
    .progress-wrapper {
      margin-top: 2.5rem;
    }

    .progress-label {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }

    .progress-label-text {
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--text-primary);
    }

    .progress-percentage {
      font-size: 0.85rem;
      font-weight: 600;
      background: rgba(207, 232, 229, 0.3);
      padding: 0.4rem 0.8rem;
      border-radius: 8px;
      color: var(--text-primary);
    }

    .progress {
      height: 16px;
      background: rgba(255, 255, 255, 0.6);
      border-radius: 12px;
      overflow: hidden;
      box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.06);
    }

    .progress-bar-custom {
      height: 100%;
      background: linear-gradient(90deg, var(--soft-sage), var(--soft-blue));
      border-radius: 12px;
      transition: width 0.6s ease;
      box-shadow: 0 4px 12px rgba(207, 232, 229, 0.4);
    }

    /* Status Badge */
    .status-wrapper {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .status-badge {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 1rem 1.5rem;
      border-radius: 16px;
      font-weight: 600;
      font-size: 0.95rem;
      flex: 1;
    }

    .status-badge.normal {
      background: rgba(168, 213, 186, 0.15);
      color: #2D5F47;
      border: 2px solid rgba(168, 213, 186, 0.5);
    }

    .status-badge.warning {
      background: rgba(255, 212, 163, 0.15);
      color: #8B5A00;
      border: 2px solid rgba(255, 212, 163, 0.5);
    }

    .status-badge.urgent {
      background: rgba(232, 180, 184, 0.15);
      color: #8B3A3F;
      border: 2px solid rgba(232, 180, 184, 0.5);
    }

    .status-icon {
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .status-icon svg {
      width: 20px;
      height: 20px;
    }

    /* Interpretation Card */
    .interpretation-card {
      background: linear-gradient(135deg, rgba(230, 230, 250, 0.5), rgba(214, 230, 242, 0.5));
      border-radius: 20px;
      padding: 2rem;
      margin-bottom: 2rem;
      border: 2px solid rgba(230, 230, 250, 0.4);
    }

    .interpretation-title {
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .interpretation-title svg {
      width: 22px;
      height: 22px;
      color: var(--soft-sage);
    }

    .interpretation-text {
      font-size: 0.95rem;
      line-height: 1.7;
      color: var(--text-secondary);
      margin: 0;
    }

    /* Recommendation Card */
    .recommendation-card {
      background: linear-gradient(135deg, rgba(207, 232, 229, 0.1), rgba(230, 230, 250, 0.1));
      border-radius: 20px;
      padding: 2rem;
      border: 2px solid rgba(207, 232, 229, 0.2);
      margin-bottom: 2rem;
    }

    .recommendation-title {
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .recommendation-title svg {
      width: 22px;
      height: 22px;
      color: var(--soft-blue);
    }

    .recommendation-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .recommendation-item {
      display: flex;
      gap: 1rem;
      margin-bottom: 0.75rem;
      font-size: 0.95rem;
      color: var(--text-secondary);
      line-height: 1.6;
    }

    .recommendation-item:last-child {
      margin-bottom: 0;
    }

    .recommendation-dot {
      width: 8px;
      height: 8px;
      background: var(--soft-sage);
      border-radius: 50%;
      margin-top: 0.5rem;
      flex-shrink: 0;
    }

    /* Bottom Action */
    .action-section {
      display: flex;
      gap: 1rem;
    }

    .btn-action {
      flex: 1;
      padding: 1rem;
      border-radius: 16px;
      border: 2px solid transparent;
      font-weight: 600;
      font-size: 0.95rem;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
      text-decoration: none;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.75rem;
    }

    .btn-action.primary {
      background: linear-gradient(135deg, var(--soft-sage), #B8D8D4);
      color: var(--text-primary);
      box-shadow: 0 8px 24px rgba(207, 232, 229, 0.4);
    }

    .btn-action.primary:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 32px rgba(207, 232, 229, 0.6);
    }

    .btn-action.secondary {
      background: rgba(255, 255, 255, 0.9);
      color: var(--text-primary);
      border: 2px solid rgba(207, 232, 229, 0.3);
    }

    .btn-action.secondary:hover {
      background: rgba(207, 232, 229, 0.1);
      border-color: var(--soft-sage);
    }

    .btn-action svg {
      width: 18px;
      height: 18px;
    }

    /* Chart Grid */
    .chart-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .chart-item {
      background: rgba(255, 255, 255, 0.7);
      border-radius: 16px;
      padding: 1.5rem;
      text-align: center;
      border: 2px solid rgba(207, 232, 229, 0.2);
    }

    .chart-item-label {
      font-size: 0.8rem;
      color: var(--text-tertiary);
      text-transform: uppercase;
      letter-spacing: 0.3px;
      margin-bottom: 0.75rem;
      font-weight: 600;
    }

    .chart-item-value {
      font-size: 1.75rem;
      font-weight: 700;
      background: linear-gradient(135deg, var(--soft-sage), var(--soft-blue));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    /* Responsive */
    @media (max-width: 576px) {
      .main-container {
        padding: 1.5rem 0.75rem;
      }

      .patient-card {
        padding: 1.5rem;
      }

      .patient-header {
        gap: 1rem;
        margin-bottom: 1.5rem;
        padding-bottom: 1.5rem;
      }

      .patient-avatar {
        width: 70px;
        height: 70px;
      }

      .patient-info h2 {
        font-size: 1.2rem;
      }

      .score-number {
        font-size: 3.5rem;
      }

      .score-section {
        padding: 1.5rem;
      }

      .interpretation-card,
      .recommendation-card {
        padding: 1.5rem;
      }

      .chart-grid {
        grid-template-columns: repeat(3, 1fr);
        gap: 1rem;
      }

      .chart-item {
        padding: 1rem;
      }

      .chart-item-value {
        font-size: 1.4rem;
      }

      .action-section {
        flex-direction: column;
      }

      .btn-action {
        width: 100%;
      }
    }
  </style>
  <script src="https://cdn.tailwindcss.com/3.4.17" type="text/javascript"></script>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <style>body { box-sizing: border-box; }</style>
 </head>
 <body>
  <div class="main-container">
   <div class="content-wrapper"><!-- Header with Back Button -->
    <div class="header-bar"><button class="btn-back" id="backBtn" onclick="handleBack()">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
      </svg></button>
     <div class="header-title">
      <h1 id="pageTitle">Hasil Skrining SRQ</h1>
     </div>
    </div><!-- Patient Info Card -->
    <div class="patient-card"><!-- Patient Header -->
     <div class="patient-header">
      <div class="patient-avatar">
       <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
       </svg>
      </div>
      <div class="patient-info">
       <h2 id="patientName">Budi Santoso</h2>
       <p>ID Pasien: PST-2024-001</p>
      </div>
     </div><!-- Score Section -->
     <div class="score-section">
      <div class="score-label">
       Total Skor SRQ
      </div>
      <h3 class="score-number" id="scoreNumber">6</h3>
      <div class="score-max">
       dari 10 poin
      </div>
      <div class="progress-wrapper">
       <div class="progress-label"><span class="progress-label-text">Tingkat Gejala</span> <span class="progress-percentage" id="scorePercentage">60%</span>
       </div>
       <div class="progress">
        <div class="progress-bar-custom" id="progressBar" style="width: 60%;"></div>
       </div>
      </div>
     </div><!-- Status Badge -->
     <div class="status-wrapper">
      <div class="status-badge warning" id="statusBadge">
       <div class="status-icon">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4v.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
       </div><span id="statusLabel">Perlu Konsultasi</span>
      </div>
     </div><!-- Interpretation -->
     <div class="interpretation-card">
      <div class="interpretation-title">
       <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
       </svg> Interpretasi Hasil
      </div>
      <p class="interpretation-text" id="interpretationText">Hasil skrining menunjukkan Anda mengalami gejala gangguan kesehatan mental yang cukup signifikan. Beberapa gejala seperti kecemasan, kesulitan tidur, dan perasaan tertekan terlihat menonjol. Sangat disarankan untuk melakukan konsultasi dengan profesional kesehatan mental untuk evaluasi lebih lanjut dan mendapatkan penanganan yang sesuai.</p>
     </div><!-- Recommendations -->
     <div class="recommendation-card">
      <div class="recommendation-title">
       <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
       </svg><span id="consultationNote">Rekomendasi Selanjutnya</span>
      </div>
      <ul class="recommendation-list">
       <li class="recommendation-item">
        <div class="recommendation-dot"></div><span>Lakukan konsultasi dengan psikolog atau psikiater dalam waktu dekat</span></li>
       <li class="recommendation-item">
        <div class="recommendation-dot"></div><span>Terapkan teknik manajemen stres seperti meditasi atau mindfulness</span></li>
       <li class="recommendation-item">
        <div class="recommendation-dot"></div><span>Jaga pola tidur yang teratur dan lakukan aktivitas fisik ringan</span></li>
       <li class="recommendation-item">
        <div class="recommendation-dot"></div><span>Komunikasikan perasaan Anda kepada keluarga atau orang terpercaya</span></li>
      </ul>
     </div><!-- Statistics Grid -->
     <div class="chart-grid">
      <div class="chart-item">
       <div class="chart-item-label">
        Gejala Fisik
       </div>
       <div class="chart-item-value">
        40%
       </div>
      </div>
      <div class="chart-item">
       <div class="chart-item-label">
        Emosional
       </div>
       <div class="chart-item-value">
        70%
       </div>
      </div>
      <div class="chart-item">
       <div class="chart-item-label">
        Fungsi Sosial
       </div>
       <div class="chart-item-value">
        50%
       </div>
      </div>
     </div><!-- Action Buttons -->
     <div class="action-section"><button class="btn-action secondary" id="backButton" onclick="handleBack()">
       <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
       </svg><span id="backButtonText">Kembali ke Dashboard</span> </button> <button class="btn-action primary" onclick="handleDownload()">
       <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
       </svg> Unduh Hasil </button>
     </div>
    </div>
   </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Default configuration
    const defaultConfig = {
      page_title: 'Hasil Skrining SRQ',
      back_button_text: 'Kembali ke Dashboard',
      patient_name: 'Budi Santoso',
      status_label: 'Perlu Konsultasi',
      consultation_note: 'Rekomendasi Selanjutnya',
      background_color: '#FDF6EC',
      surface_color: '#FFFFFF',
      text_color: '#2D3748',
      primary_action_color: '#CFE8E5',
      secondary_action_color: '#E6E6FA'
    };

    // Dummy patient data with different scenarios
    const patientData = {
      id: 'PST-2024-001',
      name: 'Budi Santoso',
      score: 6,
      status: 'warning', // 'normal', 'warning', 'urgent'
      physicalSymptoms: 40,
      emotionalSymptoms: 70,
      socialFunction: 50
    };

    // Calculate percentage
    function calculatePercentage(score, max = 10) {
      return Math.round((score / max) * 100);
    }

    // Get status info based on score
    function getStatusInfo(score) {
      if (score <= 3) {
        return {
          status: 'normal',
          label: 'Status: Baik',
          class: 'normal',
          interpretation: 'Hasil skrining menunjukkan kondisi kesehatan mental Anda dalam kategori baik. Tidak ada tanda-tanda gangguan kesehatan mental yang signifikan. Terus jaga pola hidup sehat dan kelola stres dengan baik.'
        };
      } else if (score <= 6) {
        return {
          status: 'warning',
          label: 'Perlu Konsultasi',
          class: 'warning',
          interpretation: 'Hasil skrining menunjukkan Anda mengalami gejala gangguan kesehatan mental yang cukup signifikan. Beberapa gejala seperti kecemasan, kesulitan tidur, dan perasaan tertekan terlihat menonjol. Sangat disarankan untuk melakukan konsultasi dengan profesional kesehatan mental.'
        };
      } else {
        return {
          status: 'urgent',
          label: 'Perlu Perhatian Urgent',
          class: 'urgent',
          interpretation: 'Hasil skrining menunjukkan Anda mengalami gejala gangguan kesehatan mental yang sangat serius. Diperlukan penanganan profesional segera. Silakan hubungi layanan kesehatan mental atau rumah sakit untuk mendapatkan evaluasi dan penanganan yang tepat.'
        };
      }
    }

    // Initialize Element SDK
    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange: async (config) => {
          // Update page title
          document.getElementById('pageTitle').textContent = config.page_title || defaultConfig.page_title;

          // Update patient name
          document.getElementById('patientName').textContent = config.patient_name || defaultConfig.patient_name;

          // Update back button text
          document.getElementById('backButtonText').textContent = config.back_button_text || defaultConfig.back_button_text;

          // Update status label
          document.getElementById('statusLabel').textContent = config.status_label || defaultConfig.status_label;

          // Update consultation note
          document.getElementById('consultationNote').textContent = config.consultation_note || defaultConfig.consultation_note;

          // Apply colors
          const bgColor = config.background_color || defaultConfig.background_color;
          const surfaceColor = config.surface_color || defaultConfig.surface_color;
          const textColor = config.text_color || defaultConfig.text_color;
          const primaryColor = config.primary_action_color || defaultConfig.primary_action_color;
          const secondaryColor = config.secondary_action_color || defaultConfig.secondary_action_color;

          document.body.style.background = `linear-gradient(135deg, ${bgColor} 0%, #D6E6F2 50%, ${secondaryColor} 100%)`;

          document.querySelectorAll('.patient-card, .chart-item').forEach(el => {
            el.style.background = surfaceColor ? `rgba(255, 255, 255, 0.95)` : '';
          });

          document.querySelectorAll('.page-title, .interpretation-title').forEach(el => {
            el.style.color = textColor;
          });

          document.querySelectorAll('.btn-action.primary').forEach(btn => {
            btn.style.background = `linear-gradient(135deg, ${primaryColor}, #B8D8D4)`;
          });
        },
        mapToCapabilities: (config) => ({
          recolorables: [
            {
              get: () => config.background_color || defaultConfig.background_color,
              set: (value) => {
                config.background_color = value;
                window.elementSdk.setConfig({ background_color: value });
              }
            },
            {
              get: () => config.surface_color || defaultConfig.surface_color,
              set: (value) => {
                config.surface_color = value;
                window.elementSdk.setConfig({ surface_color: value });
              }
            },
            {
              get: () => config.text_color || defaultConfig.text_color,
              set: (value) => {
                config.text_color = value;
                window.elementSdk.setConfig({ text_color: value });
              }
            },
            {
              get: () => config.primary_action_color || defaultConfig.primary_action_color,
              set: (value) => {
                config.primary_action_color = value;
                window.elementSdk.setConfig({ primary_action_color: value });
              }
            },
            {
              get: () => config.secondary_action_color || defaultConfig.secondary_action_color,
              set: (value) => {
                config.secondary_action_color = value;
                window.elementSdk.setConfig({ secondary_action_color: value });
              }
            }
          ],
          borderables: [],
          fontEditable: undefined,
          fontSizeable: undefined
        }),
        mapToEditPanelValues: (config) => new Map([
          ['page_title', config.page_title || defaultConfig.page_title],
          ['back_button_text', config.back_button_text || defaultConfig.back_button_text],
          ['patient_name', config.patient_name || defaultConfig.patient_name],
          ['status_label', config.status_label || defaultConfig.status_label],
          ['consultation_note', config.consultation_note || defaultConfig.consultation_note]
        ])
      });
    }

    // Initialize page with data
    function initializePage() {
      const statusInfo = getStatusInfo(patientData.score);
      const percentage = calculatePercentage(patientData.score);

      // Update score display
      document.getElementById('scoreNumber').textContent = patientData.score;
      document.getElementById('scorePercentage').textContent = percentage + '%';
      document.getElementById('progressBar').style.width = percentage + '%';

      // Update status
      const statusBadge = document.getElementById('statusBadge');
      statusBadge.className = `status-badge ${statusInfo.class}`;
      document.getElementById('statusLabel').textContent = statusInfo.label;

      // Update interpretation
      document.getElementById('interpretationText').textContent = statusInfo.interpretation;

      // Update statistics
      document.querySelectorAll('.chart-item')[0].querySelector('.chart-item-value').textContent = patientData.physicalSymptoms + '%';
      document.querySelectorAll('.chart-item')[1].querySelector('.chart-item-value').textContent = patientData.emotionalSymptoms + '%';
      document.querySelectorAll('.chart-item')[2].querySelector('.chart-item-value').textContent = patientData.socialFunction + '%';
    }

    // Handle back button
    function handleBack() {
      // In a real app, this would navigate to dashboard
      // For demo purposes, show a message
      alert('Kembali ke halaman Dashboard Pasien');
      // window.location.href = '/dashboard';
    }

    // Handle download
    function handleDownload() {
      // Create simple PDF-like download simulation
      const content = `
LAPORAN HASIL SKRINING SRQ
==========================

Nama Pasien: ${patientData.name}
ID Pasien: ${patientData.id}
Tanggal: ${new Date().toLocaleDateString('id-ID')}

HASIL SKRINING
Total Skor: ${patientData.score} / 10
Persentase: ${calculatePercentage(patientData.score)}%

STATUS: ${getStatusInfo(patientData.score).label}

GEJALA
- Gejala Fisik: ${patientData.physicalSymptoms}%
- Gejala Emosional: ${patientData.emotionalSymptoms}%
- Fungsi Sosial: ${patientData.socialFunction}%

INTERPRETASI
${getStatusInfo(patientData.score).interpretation}

REKOMENDASI
1. Lakukan konsultasi dengan psikolog atau psikiater
2. Terapkan teknik manajemen stres
3. Jaga pola tidur yang teratur
4. Komunikasikan perasaan kepada orang terpercaya

Generated on ${new Date().toLocaleString('id-ID')}
      `;

      const blob = new Blob([content], { type: 'text/plain' });
      const url = window.URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      link.download = `Hasil_SRQ_${patientData.name}_${new Date().getTime()}.txt`;
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      window.URL.revokeObjectURL(url);
    }

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', initializePage);
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9d0ac2fbb5c9afeb',t:'MTc3MTU1NjUxMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>