<!doctype html>
<html lang="id" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Premarital Examination Result</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    :root {
      --soft-sage: #CFE8E5;
      --soft-lavender: #E6E6FA;
      --soft-blue: #D6E6F2;
      --soft-beige: #FDF6EC;
      --text-primary: #2D3748;
      --text-secondary: #718096;
      --text-tertiary: #A0AEC0;
      --card-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
      --status-pass: #A8D5BA;
      --status-warning: #FFD4A3;
    }

    * {
      font-family: 'Plus Jakarta Sans', sans-serif;
    }

    html, body {
      height: 100%;
      margin: 0;
    }

    body {
      background: linear-gradient(135deg, var(--soft-beige) 0%, var(--soft-blue) 50%, var(--soft-lavender) 100%);
      min-height: 100%;
      color: var(--text-primary);
    }

    .main-container {
      min-height: 100%;
      padding: 2rem 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .content-wrapper {
      width: 100%;
      max-width: 800px;
    }

    /* Header with Back Button */
    .header-bar {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 2.5rem;
    }

    .btn-back {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 44px;
      height: 44px;
      background: rgba(255, 255, 255, 0.9);
      border: 2px solid rgba(207, 232, 229, 0.3);
      border-radius: 14px;
      cursor: pointer;
      transition: all 0.3s ease;
      flex-shrink: 0;
    }

    .btn-back:hover {
      background: var(--soft-sage);
      transform: translateX(-4px);
      border-color: var(--soft-sage);
    }

    .btn-back svg {
      width: 20px;
      height: 20px;
      color: var(--text-primary);
      stroke-width: 2.5;
    }

    .header-title {
      flex-grow: 1;
    }

    .header-title h1 {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--text-primary);
      margin: 0;
    }

    /* Main Card */
    .main-card {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 28px;
      padding: 2.5rem;
      box-shadow: var(--card-shadow);
      margin-bottom: 2rem;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.5);
    }

    /* Patient Header */
    .patient-header {
      display: flex;
      align-items: center;
      gap: 1.5rem;
      margin-bottom: 2.5rem;
      padding-bottom: 2rem;
      border-bottom: 2px solid rgba(207, 232, 229, 0.2);
    }

    .patient-avatar {
      width: 90px;
      height: 90px;
      background: linear-gradient(135deg, var(--soft-sage), var(--soft-blue));
      border-radius: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 8px 24px rgba(207, 232, 229, 0.3);
      flex-shrink: 0;
    }

    .patient-avatar svg {
      width: 45px;
      height: 45px;
      color: var(--text-primary);
    }

    .patient-info h2 {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--text-primary);
      margin: 0 0 0.5rem 0;
    }

    .patient-info p {
      font-size: 0.9rem;
      color: var(--text-secondary);
      margin: 0;
      line-height: 1.6;
    }

    /* Status Badge Section */
    .status-section {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 2.5rem;
      padding: 1.5rem;
      background: linear-gradient(135deg, rgba(168, 213, 186, 0.1), rgba(214, 230, 242, 0.1));
      border-radius: 20px;
      border: 2px solid rgba(168, 213, 186, 0.2);
    }

    .status-badge {
      display: flex;
      align-items: center;
      gap: 1rem;
      flex-grow: 1;
    }

    .status-icon {
      width: 48px;
      height: 48px;
      background: rgba(168, 213, 186, 0.3);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .status-icon svg {
      width: 28px;
      height: 28px;
      color: #2D5F47;
    }

    .status-badge.warning .status-icon {
      background: rgba(255, 212, 163, 0.3);
    }

    .status-badge.warning .status-icon svg {
      color: #8B5A00;
    }

    .status-info h3 {
      font-size: 1.2rem;
      font-weight: 700;
      color: var(--text-primary);
      margin: 0 0 0.25rem 0;
    }

    .status-info p {
      font-size: 0.85rem;
      color: var(--text-secondary);
      margin: 0;
    }

    /* Summary Grid */
    .summary-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1.5rem;
      margin-bottom: 2.5rem;
    }

    .summary-item {
      background: linear-gradient(135deg, rgba(230, 230, 250, 0.4), rgba(214, 230, 242, 0.4));
      border-radius: 16px;
      padding: 1.5rem;
      border: 2px solid rgba(207, 232, 229, 0.2);
    }

    .summary-label {
      font-size: 0.8rem;
      color: var(--text-tertiary);
      text-transform: uppercase;
      letter-spacing: 0.4px;
      font-weight: 600;
      margin-bottom: 0.75rem;
    }

    .summary-value {
      font-size: 1.3rem;
      font-weight: 700;
      color: var(--text-primary);
      margin: 0;
    }

    .summary-detail {
      font-size: 0.85rem;
      color: var(--text-secondary);
      margin-top: 0.5rem;
    }

    /* Examination Summary Card */
    .exam-summary-card {
      background: linear-gradient(135deg, rgba(207, 232, 229, 0.1), rgba(230, 230, 250, 0.1));
      border-radius: 20px;
      padding: 2rem;
      margin-bottom: 2rem;
      border: 2px solid rgba(207, 232, 229, 0.2);
    }

    .exam-summary-title {
      font-size: 1.15rem;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 1.5rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .exam-summary-title svg {
      width: 24px;
      height: 24px;
      color: var(--soft-sage);
    }

    .exam-list {
      list-style: none;
      padding: 0;
      margin: 0;
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1.25rem;
    }

    .exam-item {
      display: flex;
      gap: 1rem;
      padding: 1rem;
      background: rgba(255, 255, 255, 0.6);
      border-radius: 12px;
      border: 1px solid rgba(207, 232, 229, 0.2);
    }

    .exam-check {
      width: 24px;
      height: 24px;
      background: rgba(168, 213, 186, 0.2);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .exam-check svg {
      width: 16px;
      height: 16px;
      color: #2D5F47;
    }

    .exam-name {
      font-size: 0.9rem;
      color: var(--text-primary);
      font-weight: 500;
      line-height: 1.5;
    }

    /* Doctor Notes Card */
    .notes-card {
      background: linear-gradient(135deg, rgba(230, 230, 250, 0.5), rgba(214, 230, 242, 0.5));
      border-radius: 20px;
      padding: 2rem;
      margin-bottom: 2rem;
      border: 2px solid rgba(230, 230, 250, 0.4);
    }

    .notes-title {
      font-size: 1.15rem;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .notes-title svg {
      width: 24px;
      height: 24px;
      color: var(--soft-blue);
    }

    .notes-text {
      font-size: 0.95rem;
      line-height: 1.8;
      color: var(--text-secondary);
      margin: 0;
    }

    /* Divider */
    .divider {
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(207, 232, 229, 0.3), transparent);
      margin: 2rem 0;
    }

    /* Action Buttons */
    .action-section {
      display: flex;
      gap: 1rem;
    }

    .btn-action {
      flex: 1;
      padding: 1.1rem;
      border-radius: 14px;
      border: 2px solid transparent;
      font-weight: 600;
      font-size: 0.95rem;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
      text-decoration: none;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.75rem;
    }

    .btn-action.primary {
      background: linear-gradient(135deg, var(--soft-sage), #B8D8D4);
      color: var(--text-primary);
      box-shadow: 0 8px 24px rgba(207, 232, 229, 0.4);
    }

    .btn-action.primary:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 32px rgba(207, 232, 229, 0.6);
    }

    .btn-action.secondary {
      background: rgba(255, 255, 255, 0.9);
      color: var(--text-primary);
      border: 2px solid rgba(207, 232, 229, 0.3);
    }

    .btn-action.secondary:hover {
      background: rgba(207, 232, 229, 0.1);
      border-color: var(--soft-sage);
    }

    .btn-action svg {
      width: 18px;
      height: 18px;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .main-container {
        padding: 1.5rem 0.75rem;
      }

      .main-card {
        padding: 1.5rem;
      }

      .patient-header {
        gap: 1rem;
        margin-bottom: 1.5rem;
        padding-bottom: 1.5rem;
      }

      .patient-avatar {
        width: 75px;
        height: 75px;
      }

      .patient-info h2 {
        font-size: 1.25rem;
      }

      .summary-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
      }

      .exam-list {
        grid-template-columns: 1fr;
      }

      .exam-item {
        padding: 0.75rem;
      }

      .action-section {
        flex-direction: column;
      }

      .btn-action {
        width: 100%;
      }

      .exam-summary-card,
      .notes-card {
        padding: 1.5rem;
      }
    }

    @media (max-width: 576px) {
      .header-bar {
        margin-bottom: 2rem;
      }

      .header-title h1 {
        font-size: 1.25rem;
      }

      .patient-header {
        flex-direction: column;
        text-align: center;
      }

      .patient-avatar {
        width: 70px;
        height: 70px;
      }

      .patient-info h2 {
        font-size: 1.1rem;
      }

      .status-section {
        flex-direction: column;
        text-align: center;
      }

      .summary-item {
        padding: 1.25rem;
      }

      .exam-list {
        gap: 1rem;
      }

      .divider {
        margin: 1.5rem 0;
      }

      .exam-summary-title,
      .notes-title {
        font-size: 1rem;
      }
    }
  </style>
  <script src="https://cdn.tailwindcss.com/3.4.17" type="text/javascript"></script>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <style>body { box-sizing: border-box; }</style>
 </head>
 <body>
  <div class="main-container">
   <div class="content-wrapper">
    <!-- Header -->
    <div class="header-bar">
     <button class="btn-back" id="backBtn" onclick="handleBack()">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor">
       <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
      </svg></button>
     <div class="header-title">
      <h1 id="pageTitle">Hasil Pemeriksaan Pranikah</h1>
     </div>
    </div><!-- Main Card -->
    <div class="main-card">
     <!-- Patient Header -->
     <div class="patient-header">
      <div class="patient-avatar">
       <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
       </svg>
      </div>
      <div class="patient-info">
       <h2 id="patientName">Siti Nurhaliza</h2>
       <p>ID Pasien: PRM-2024-5847</p>
       <p id="examDate">Pemeriksaan: 15 Januari 2024</p>
      </div>
     </div><!-- Status Badge -->
     <div class="status-section">
      <div class="status-badge" id="statusBadge">
       <div class="status-icon">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor">
         <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
       </div>
       <div class="status-info">
        <h3 id="statusTitle">LAYAK MENIKAH</h3>
        <p id="statusDesc">Semua pemeriksaan dalam kondisi normal dan baik</p>
       </div>
      </div>
     </div><!-- Summary Grid -->
     <div class="summary-grid">
      <div class="summary-item">
       <div class="summary-label">
        Hasil Pemeriksaan
       </div>
       <p class="summary-value" id="examResult">Normal</p>
       <p class="summary-detail">Tanpa kelainan signifikan</p>
      </div>
      <div class="summary-item">
       <div class="summary-label">
        Tanggal Pemeriksaan
       </div>
       <p class="summary-value">15 Jan</p>
       <p class="summary-detail">2024</p>
      </div>
     </div><!-- Examination Summary -->
     <div class="exam-summary-card">
      <div class="exam-summary-title">
       <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" />
       </svg><span id="summaryTitle">Ringkasan Pemeriksaan</span>
      </div>
      <ul class="exam-list">
       <li class="exam-item">
        <div class="exam-check">
         <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
         </svg>
        </div>
        <div class="exam-name">
         Pemeriksaan Umum
        </div></li>
       <li class="exam-item">
        <div class="exam-check">
         <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
         </svg>
        </div>
        <div class="exam-name">
         Pemeriksaan Fisik
        </div></li>
       <li class="exam-item">
        <div class="exam-check">
         <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
         </svg>
        </div>
        <div class="exam-name">
         Pemeriksaan Lab
        </div></li>
       <li class="exam-item">
        <div class="exam-check">
         <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
         </svg>
        </div>
        <div class="exam-name">
         Tes Kesehatan Mental
        </div></li>
       <li class="exam-item">
        <div class="exam-check">
         <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
         </svg>
        </div>
        <div class="exam-name">
         Konsultasi Reproduksi
        </div></li>
       <li class="exam-item">
        <div class="exam-check">
         <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
         </svg>
        </div>
        <div class="exam-name">
         Vaksinasi &amp; Imunisasi
        </div></li>
      </ul>
     </div><!-- Doctor Notes -->
     <div class="notes-card">
      <div class="notes-title">
       <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
       </svg><span id="doctorNoteLabel">Catatan dari Bidan/Dokter</span>
      </div>
      <p class="notes-text" id="doctorNote">Pemeriksaan pranikah menunjukkan pasien dalam kondisi kesehatan yang sangat baik. Tekanan darah, detak jantung, dan hasil pemeriksaan lab semuanya dalam rentang normal. Tidak ada penyakit menular atau kelainan genetik yang terdeteksi. Pasien juga menunjukkan kesiapan psikologis yang baik untuk menikah. Hasil skrining SRQ menunjukkan kesehatan mental dalam kategori normal. Rekomendasi: Lanjutkan gaya hidup sehat, istirahat cukup, dan olahraga teratur sebelum pernikahan.</p>
     </div><!-- Divider -->
     <div class="divider"></div><!-- Action Buttons -->
     <div class="action-section">
      <button class="btn-action secondary" id="backButton" onclick="handleBack()">
       <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
       </svg><span id="backButtonText">Kembali ke Dashboard</span> </button> <button class="btn-action primary" onclick="handleDownload()">
       <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3v-7" />
       </svg> Unduh Laporan </button>
     </div>
    </div>
   </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Default configuration
    const defaultConfig = {
      page_title: 'Hasil Pemeriksaan Pranikah',
      back_button_text: 'Kembali ke Dashboard',
      patient_name: 'Siti Nurhaliza',
      exam_date_label: 'Pemeriksaan: 15 Januari 2024',
      summary_title: 'Ringkasan Pemeriksaan',
      doctor_note_label: 'Catatan dari Bidan/Dokter'
    };

    // Dummy patient data
    const patientData = {
      id: 'PRM-2024-5847',
      name: 'Siti Nurhaliza',
      examDate: '15 Januari 2024',
      status: 'pass', // 'pass' or 'warning'
      result: 'Normal',
      examinations: [
        'Pemeriksaan Umum',
        'Pemeriksaan Fisik',
        'Pemeriksaan Lab',
        'Tes Kesehatan Mental',
        'Konsultasi Reproduksi',
        'Vaksinasi & Imunisasi'
      ],
      notes: 'Pemeriksaan pranikah menunjukkan pasien dalam kondisi kesehatan yang sangat baik. Tekanan darah, detak jantung, dan hasil pemeriksaan lab semuanya dalam rentang normal. Tidak ada penyakit menular atau kelainan genetik yang terdeteksi. Pasien juga menunjukkan kesiapan psikologis yang baik untuk menikah. Hasil skrining SRQ menunjukkan kesehatan mental dalam kategori normal. Rekomendasi: Lanjutkan gaya hidup sehat, istirahat cukup, dan olahraga teratur sebelum pernikahan.'
    };

    // Initialize Element SDK
    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange: async (config) => {
          // Update text content
          document.getElementById('pageTitle').textContent = config.page_title || defaultConfig.page_title;
          document.getElementById('patientName').textContent = config.patient_name || defaultConfig.patient_name;
          document.getElementById('examDate').textContent = config.exam_date_label || defaultConfig.exam_date_label;
          document.getElementById('backButtonText').textContent = config.back_button_text || defaultConfig.back_button_text;
          document.getElementById('summaryTitle').textContent = config.summary_title || defaultConfig.summary_title;
          document.getElementById('doctorNoteLabel').textContent = config.doctor_note_label || defaultConfig.doctor_note_label;
        },
        mapToCapabilities: (config) => ({
          recolorables: [],
          borderables: [],
          fontEditable: undefined,
          fontSizeable: undefined
        }),
        mapToEditPanelValues: (config) => new Map([
          ['page_title', config.page_title || defaultConfig.page_title],
          ['back_button_text', config.back_button_text || defaultConfig.back_button_text],
          ['patient_name', config.patient_name || defaultConfig.patient_name],
          ['exam_date_label', config.exam_date_label || defaultConfig.exam_date_label],
          ['summary_title', config.summary_title || defaultConfig.summary_title],
          ['doctor_note_label', config.doctor_note_label || defaultConfig.doctor_note_label]
        ])
      });
    }

    // Initialize page
    function initializePage() {
      // Update patient info
      document.getElementById('patientName').textContent = patientData.name;
      document.getElementById('examDate').textContent = `Pemeriksaan: ${patientData.examDate}`;

      // Update status
      const statusBadge = document.getElementById('statusBadge');
      const statusTitle = document.getElementById('statusTitle');
      const statusDesc = document.getElementById('statusDesc');

      if (patientData.status === 'pass') {
        statusBadge.className = 'status-badge';
        statusTitle.textContent = 'LAYAK MENIKAH';
        statusDesc.textContent = 'Semua pemeriksaan dalam kondisi normal dan baik';
      } else {
        statusBadge.className = 'status-badge warning';
        statusTitle.textContent = 'PERLU TINDAK LANJUT';
        statusDesc.textContent = 'Ada beberapa hasil yang perlu evaluasi lebih lanjut';
      }

      // Update exam result
      document.getElementById('examResult').textContent = patientData.result;

      // Update doctor notes
      document.getElementById('doctorNote').textContent = patientData.notes;
    }

    // Handle back button
    function handleBack() {
      console.log('Kembali ke halaman Dashboard');
      // In a real app: window.location.href = '/dashboard';
    }

    // Handle download
    function handleDownload() {
      const content = `
LAPORAN HASIL PEMERIKSAAN PRANIKAH
===================================

IDENTITAS PASIEN
Nama: ${patientData.name}
ID Pasien: ${patientData.id}
Tanggal Pemeriksaan: ${patientData.examDate}

STATUS KESEHATAN
Status: ${patientData.status === 'pass' ? 'LAYAK MENIKAH' : 'PERLU TINDAK LANJUT'}
Hasil Umum: ${patientData.result}

DAFTAR PEMERIKSAAN YANG DILAKUKAN
${patientData.examinations.map((exam, i) => `${i + 1}. ${exam}`).join('\n')}

CATATAN DOKTER/BIDAN
${patientData.notes}

KESIMPULAN
${patientData.status === 'pass' 
  ? 'Pasien dinyatakan layak menikah dan tidak memiliki kontraindikasi medis untuk melanjutkan ke pernikahan.' 
  : 'Pasien memerlukan evaluasi lebih lanjut sebelum dinyatakan layak menikah.'}

---
Laporan ini dikeluarkan oleh: Bidan/Dokter Klinik
Tanggal Laporan: ${new Date().toLocaleDateString('id-ID')}
Waktu: ${new Date().toLocaleTimeString('id-ID')}
      `;

      const blob = new Blob([content], { type: 'text/plain' });
      const url = window.URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      link.download = `Hasil_Pemeriksaan_Pranikah_${patientData.name.replace(/\s+/g, '_')}_${new Date().getTime()}.txt`;
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      window.URL.revokeObjectURL(url);
    }

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', initializePage);
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9d0adb8d719cea86',t:'MTc3MTU1NzUxNi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>